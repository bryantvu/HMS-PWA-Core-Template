# PWA Builder HMS Template
This Android project is the base template for the Huawei AppGallery build option on [PWA Builder AG](https://pwabuilder-ag.com/).

While PWA Builder can automatically generate an APK without the Android Studio IDE, it is very simple for a developer with Android experience to modify the template project directly. 

This option might be better if: 
- There are issues using PWA Builder to generate an APK.
- A developer wishes to customize the PWA solution to meet their needs.

## FAQ

1. What is a PWA?  <br />
PWA  = Progress Web Application. Web apps that are built with modern APIs to deliver enhanced capabilities, reliability, and a better end user experience that is closer to native mobile app. https://web.dev/what-are-pwas/
2. What is PWA Builder?  <br />
[PWABuilder.com](https://www.pwabuilder.com/) is a Microsoft open-source tool to package PWAs for mobile app stores. 
3. What is PWA Builder AG?  <br />
[PWABuilder-AG.com](https://pwabuilder-ag.com/) is an enhancement to Microsoft's tool that adds support for HMS Kits.
4. What is a PWA APK (Web APK)?  <br />
Native Android APK generated by PWA Builder wherein the PWA is loaded via webview. Since a PWA APK is a native package, Android libraries and APIs can be added.
5. What is the ideal use case for PWA Builder?  <br />
- Host URL does not have an Android app 
- PWABuilder.com will only generate an APK when the host URL passes the PWA test (on PWA Builder.com). Non-PWA websites cannot be used to generate PWA APKs.
- PWA website running on Android webview might behave differently than expected on browser. Make sure that user experience is still adequate on PWA APK.
6. When should PWA Builder not be used?  <br />
- When host URL is not a PWA.
- When the user experience of PWA website running on Android webview is impacted.

## Setup
- Modify the values for name, short_name, description, and start_url at ['app/src/main/assets/manifest.json'](https://github.com/bryantvu/HMS-PWA-Core-Template/blob/master/app/src/main/assets/manifest.json) to match your desired website.
- [strings.xml (line 2)](https://github.com/bryantvu/HMS-PWA-Core-Template/blob/d797b6749c375e1de4fa37f8bbdb0153ed2a156d/app/src/main/res/values/strings.xml#L2) replace 'app_name' with new app name. This will show up on the home screen.

## Enabling HMS Kits
1. Configure the app on AppGallery Connect
2. Download the agconnect-services.json and place it in the '/app' folder.
3. Refactor '/app/src/main/java/com/bvutest/core/pwa/' to match your new package name.
4. Replace all instances of the old package name (com.bvutest.core.pwa) with your new package name.
5. [AndroidManifest.xml (line 26)](https://github.com/bryantvu/HMS-PWA-Core-Template/blob/d797b6749c375e1de4fa37f8bbdb0153ed2a156d/app/src/main/AndroidManifest.xml#L26) replace 'replaceAppId' with App ID from AGC.
6. [AndroidManifest.xml (line 30)](https://github.com/bryantvu/HMS-PWA-Core-Template/blob/d797b6749c375e1de4fa37f8bbdb0153ed2a156d/app/src/main/AndroidManifest.xml#L30) replace 'replaceCpId' with CP ID from AGC.

### Splash Ads
[Developer documentation](https://developer.huawei.com/consumer/en/doc/development/HMSCore-Guides/publisher-service-splash-0000001050066919)
1. [MainActivity.java (line 84)](https://github.com/bryantvu/HMS-PWA-Core-Template/blob/d797b6749c375e1de4fa37f8bbdb0153ed2a156d/app/src/main/java/com/bvutest/core/pwa/MainActivity.java#L84) set splashEnable = true
2. [strings.xml (line 51)](https://github.com/bryantvu/HMS-PWA-Core-Template/blob/d797b6749c375e1de4fa37f8bbdb0153ed2a156d/app/src/main/res/values/strings.xml#L51) comment line out
3. [strings.xml (line 52)](https://github.com/bryantvu/HMS-PWA-Core-Template/blob/d797b6749c375e1de4fa37f8bbdb0153ed2a156d/app/src/main/res/values/strings.xml#L52) uncomment line out

### Banner Ads at top of screen
[Developer documentation](https://developer.huawei.com/consumer/en/doc/development/HMSCore-Guides/publisher-service-banner-0000001050066915)
1. [MainActivity.java (line 85)](https://github.com/bryantvu/HMS-PWA-Core-Template/blob/d797b6749c375e1de4fa37f8bbdb0153ed2a156d/app/src/main/java/com/bvutest/core/pwa/MainActivity.java#L85) set bannerEnable = true
2. [MainActivity.java (line 86)](https://github.com/bryantvu/HMS-PWA-Core-Template/blob/d797b6749c375e1de4fa37f8bbdb0153ed2a156d/app/src/main/java/com/bvutest/core/pwa/MainActivity.java#L86) set enableTopBanner = true
3. [strings.xml (line 12)](https://github.com/bryantvu/HMS-PWA-Core-Template/blob/d797b6749c375e1de4fa37f8bbdb0153ed2a156d/app/src/main/res/values/strings.xml#L12) comment line out
4. [strings.xml (line 13)](https://github.com/bryantvu/HMS-PWA-Core-Template/blob/d797b6749c375e1de4fa37f8bbdb0153ed2a156d/app/src/main/res/values/strings.xml#L13) uncomment line out

### Banner Ads at bottom of screen
[Developer documentation](https://developer.huawei.com/consumer/en/doc/development/HMSCore-Guides/publisher-service-banner-0000001050066915)
1. [MainActivity.java (line 85)](https://github.com/bryantvu/HMS-PWA-Core-Template/blob/d797b6749c375e1de4fa37f8bbdb0153ed2a156d/app/src/main/java/com/bvutest/core/pwa/MainActivity.java#L85) set bannerEnable = true
2. [strings.xml (line 12)](https://github.com/bryantvu/HMS-PWA-Core-Template/blob/d797b6749c375e1de4fa37f8bbdb0153ed2a156d/app/src/main/res/values/strings.xml#L12) comment line out
3. [strings.xml (line 13)](https://github.com/bryantvu/HMS-PWA-Core-Template/blob/d797b6749c375e1de4fa37f8bbdb0153ed2a156d/app/src/main/res/values/strings.xml#L13) uncomment line out

### Analytics/Push
Make sure that kits are properly configured on AppGallery Connect.
- [Analytics Config](https://developer.huawei.com/consumer/en/doc/development/HMSCore-Guides/android-config-agc-0000001050163815)
- [Push Config](https://developer.huawei.com/consumer/en/doc/development/HMSCore-Guides/android-config-agc-0000001050170137)


